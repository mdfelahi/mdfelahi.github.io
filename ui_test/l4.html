<!DOCTYPE html>
<html>
<head>
    <title>InnoUI</title>
    <link rel="icon" type="image/x-icon"
        href="https://escooter-phase4.s3.amazonaws.com/clips_paul_experiment/assets/media/favicon.ico">
    <!-- <script src="https://assets.crowd.aws/crowd-html-elements.js"></script> -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <style>
        .ueqs_row {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 10px;
        }
    
        .ueqs_column {
        flex: 1;
        }
    
        /* Adjustments for the middle column to space out radio buttons */
        .ueqs_column:nth-child(2) {
        display: flex;
        justify-content: center;
        gap: 10px;
        }
        #snapDiv {
        max-height: 75vh; /* vh stands for viewport height. 60vh is 60% of the viewport height*/
        overflow-y: auto; /* This will add a scrollbar when the content exceeds the max-height */
        }

        .modal-backdrop {
        opacity:0.99 !important; /* Change this to the opacity you prefer */
        }
    </style>
</head>
<body>
        <div class="container-fluid p-0">
            <div class="row ms-0 me-0 p-0" id="rowMain">
                <div class="row ms-0 me-0 p-0">
                    <div class="row ms-0 me-0 p-0" id="rowVideoHolders">
                        <div class="col-sm-8 p-0 justify-content-center" id="videoHolderDivA">
                            <div class="embed-responsive d-flex flex-column justify-content-center" id="canvasDivA">
                                <video id='video' class="embed-responsive-item" style="width:auto; height:auto;"
                                    src="./assets/videos//0104_w_intent.mp4"
                                    type="video/mp4" muted>
                                </video>
                                <div class="progress mt-1" id="progressDiv" style="height: 5px;">
                                    <div class="progress-bar" role="progressbar" style="width: 0%;" id="progressBarA"
                                        aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
                                    </div>
                                </div>                            
                            </div>
                            <div>
                                <div class="d-flex justify-content-between mt-2">
                                    <div>
                                        <button type="button" class="btn btn-outline-primary mb-2" id="instructionsBtn">Instructions</button>                                        
                                    </div>
                                    <div>
                                        <!-- show current video number here-->
                                        <button type="button" class="btn btn-outline-dark mb-2" id="videoNumberBadge">Video: 1</button>
                                    </div>
                                    <div class="d-flex justify-end" >
                                        <button type="button" class="btn btn-dark mb-2 me-2" id="prevBtn">Previous Video</button>
                                        <button type="button" class="btn btn-primary mb-2 me-2" id="playBtn">Play</button>
                                        <button type="button" class="btn btn-dark mb-2" id="nextBtn">Next Video</button>
                                    </div>
                                </div>
                                <div class="d-flex justify-content-center" id="navPanel">
                                    <div class="d-flex justify-content mt-6" style="flex-wrap: wrap;" id="videoListStatusHolder">
                                    </div>
                                </div>
                                <div class="d-flex justify-content-center mt-2">
                                    <div class="col-sm-2">
                                        <div class="toast rounded-pill mt-2 bg-dark" role="alert" id="notifToast"
                                            data-bs-delay="1500">
                                            <div class="toast-body text-center text-white" id="notifToastBody">
                                                Progress is saved!
                                            </div>
                                        </div>
                                    </div>
                                </div>                                                                 
                            </div>
                        </div>
                        <div class="col-sm-4 ps-2" id="snapshotPanel">
                            <div class="bg-dark bg-gradient rounded text-white text-center fs-5 p-1">Explanations at Paused moments</div>
                            <div class="d-flex flex-column align-items-center mt-1" id="snapDiv">
                            </div>                        
                        </div>
                    </div>
                </div>
    <!-- MODALS -->
    <!-- CONSENT FORM Modal -->
    <div class="modal fade" id="consentModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
        aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-scrollable" id="welcomeModalDialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="staticBackdropLabel">Consent Form Aggreement</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
                        style="display:none;">
                    </button>
                </div>
                <div class="modal-body" id="modalMessage">
                    <h5 style="text-align: center; line-height: 1;"><span
                            style="font-family: Calibri, sans-serif; font-weight: bold;">NORTH CAROLINA STATE UNIVERSITY
                            INFORMED CONSENT STATEMENT FOR RESEARCH</span></h5>
                    <h6 style="text-align: center; line-height: 1;"><span
                            style="font-family: Calibri, sans-serif;font-weight: bold;">[Novel XAI Interface for Automated Driving Decisions]</span></h6>
                    <h6 style="text-align: center; line-height: 1;"><span
                            style="font-family: Calibri, sans-serif;font-weight: bold;">[IRB Study X]</span>
                    </h6>
                    <p style="line-height: 1;"><span style="font-family: Calibri, sans-serif;"><br></span></p>
                    <h6 style="line-height: 1;"><span style="font-family: Calibri, sans-serif; font-weight: bold;">ABOUT
                            THIS RESEARCH</span></h6>
                    <p style="line-height: 1;"><span style="font-family: Calibri, sans-serif;">You are being asked to
                            participate in a research study sponsored by National Science
                            Foundation. Scientists do research to answer important questions which might help change or
                            improve the way we do things
                            in the future.

                            This consent form will give you information about the study to help you decide whether you
                            want to participate. Please
                            read this form, and ask any questions you have via feedback form, before agreeing to be in
                            the study.</span></p>
                    <h6 style="line-height: 1;"><span
                            style="font-family: Calibri, sans-serif; font-weight: bold;">TAKING PART IN THIS STUDY IS
                            VOLUNTARY</span></h6>
                    <p style="line-height: 1;"><span style="font-family: Calibri, sans-serif;">You may choose not to
                            take part in the study or may choose to leave the study at any time. Deciding not to
                            participate,
                            or deciding to leave the study later, will not result in any penalty or loss of benefits to
                            which you are entitled.</span></p>
                    <h6 style="line-height: 1;"><span style="font-family: Calibri, sans-serif; font-weight: bold;">WHY
                            IS THIS STUDY BEING DONE?</span></h6>
                    <p style="line-height: 1;"><span style="font-family: Calibri, sans-serif;">When riding self-driving cars like Tesla, the passengers may expect some level of explanation from the car when it drives unexpectedly. This feedback can be communicated through pictures or sounds, which helps make passengers more comfortable and secure. The purpose of this study is to investigate how different feedback visualization concepts influences the passengers’ trust towards the car, and its user experience. The findings will contribute to improving the communication between the self-driving car and its passengers.

                    </span></p>
                    <p style="line-height: 1;"><span style="font-family: Calibri, sans-serif;">You are selected as a possible participant because you own a car and may have sufficient driving experiences.</span></p>

                    <h6 style="line-height: 1;"><span style="font-family: Calibri, sans-serif; font-weight: bold;">HOW
                            MANY PEOPLE WILL TAKE PART?</span></h6>
                    <p style="line-height: 1;"><span style="font-family: Calibri, sans-serif;">If you agree to
                            participate, you will be one
                            of 1000 participants taking part in this study.</span></p>
                    <h6 style="line-height: 1;"><span style="font-family: Calibri, sans-serif; font-weight: bold;">WHAT
                            WILL HAPPEN DURING THE STUDY?</span>
                    </h6>
                    <p style="line-height: 1;"><span style="font-family: Calibri, sans-serif;">If you agree to participate in the study, you may watch up to four 15-second video clips followed by answering some questions. You will conduct the entire study online through the Prolific platform, accessible at "https://www.prolific.com/." Before starting, you will need to confirm your commitment to providing thoughtful answers to ensure the quality of the data. To help complete the task, there will be instructions accompanying illustrations for quick understanding of the requirements. Your understanding will be evaluated with as short quiz. You need to <strong>correctly answer all the questions</strong> in the quiz before attempting the task.</span></p>
                    <p style="line-height: 1;"><span style="font-family: Calibri, sans-serif;">As the first step in experiment, you will watch some recorded videos that show how a self-driving car makes driving decisions based on the motions and intentions of pedestrians and other cars. The videos contain the visuals of how the AI driving system adjusts the car's speed and direction and how it recognizes pedestrians' crossing intention and motion of the road users, such as people and other vehicles. The interface may automatically pause the videos at some moments, and you may also see brief or detailed text explanations about how the car makes driving decisions during those moments. After watching these videos, you will answer some questions about you, your experience with the visualization interface in the videos, how much you trust the car’s driving, and your opinions on Advanced driver-assistence systems. Your answers will be saved automatically.</span></p>
                    <p style="line-height: 1;"><span style="font-family: Calibri, sans-serif;">Watching all the videos should take less than two minutes, and answering the questionnaires will take about 7-8 minutes. The task should take about 10 minutes to complete. You can choose your own pace, but you need to finish within the time limit of 2 hours.</span></p>
                    <h6 style="line-height: 1;"><span style="font-family: Calibri, sans-serif; font-weight: bold;">WHAT
                            ARE THE RISKS OF TAKING PART IN THE
                            STUDY?</span></h6>
                    <p style="line-height: 1;"><span style="font-family: Calibri, sans-serif;">The risks of participating in this research are minimum. Watching the videos and answering the question continuously may cause very little fatigue.</span></p>
                    <h6 style="line-height: 1;"><span style="font-family: Calibri, sans-serif; font-weight: bold;">WHAT
                            ARE THE POTENTIAL BENEFITS OF TAKING PART IN THE STUDY?</span></h6>
                    <p style="line-height: 1;"><span style="font-family: Calibri, sans-serif;">We do not expect you to
                            receive any benefit from taking part in this study, but we hope to learn things that will
                            help
                            scientists in the future.</span></p>
                    <h6 style="line-height: 1;"><span style="font-family: Calibri, sans-serif; font-weight: bold;">HOW
                            WILL MY INFORMATION BE PROTECTED?</span>
                    </h6>
                    <p style="line-height: 1;"><span style="font-family: Calibri, sans-serif;">We will protect your
                            information and make every effort to keep your personal information confidential, but we
                            cannot
                            guarantee absolute confidentiality. No information which could identify you will be shared
                            in publications about this
                            study.</span></p>
                    <p style="line-height: 1;"><span style="font-family: Calibri, sans-serif;">Your personal information
                            may be shared outside the research study if required by law. We also may need to share your
                            research records with other groups for quality assurance or data analysis. These groups
                            include the North Carolina State University
                            Institutional Review Board or its designees, and state or federal agencies who may need to
                            access the research records
                            (as allowed by law). Additionally, your research information may be shared with our sponsors
                            on this research study at
                            Toyota Motor North America.</span></p>
                    <h6 style="line-height: 1;"><span style="font-family: Calibri, sans-serif; font-weight: bold;">WILL
                            MY INFORMATION BE USED FOR RESEARCH IN
                            THE FUTURE?</span></h6>
                    <p style="line-height: 1;"><span style="font-family: Calibri, sans-serif;">Information collected
                            from you for this study may be used for future research studies or shared with other
                            researchers
                            for future research. If this happens, since no identifying information will be collected, we
                            will not ask for your
                            additional consent.</span></p>
                    <h6 style="line-height: 1;"><span style="font-family: Calibri, sans-serif; font-weight: bold;">WILL
                            I BE PAID FOR PARTICIPATION?</span>
                    </h6>
                    <p style="line-height: 1;"><span style="font-family: Calibri, sans-serif;">We will pay $2.5 for each task containing 4 videos when all the questions are answered reasonably.</span></p>
                    <h6 style="line-height: 1;"><span style="font-family: Calibri, sans-serif; font-weight: bold;">WILL
                            IT COST ME ANYTHING TO
                            PARTICIPATE?</span></h6>
                    <p style="line-height: 1;"><span style="font-family: Calibri, sans-serif;">There is no cost to you
                            for taking part in
                            this study.</span></p>
                    <h6 style="line-height: 1;"><span style="font-family: Calibri, sans-serif; font-weight: bold;">WHO
                            SHOULD I CALL WITH QUESTIONS OR
                            PROBLEMS?</span></h6>
                    <p style="line-height: 1;"><span style="font-family: Calibri, sans-serif;">For questions or
                            suggestions about the study please contact via the support link “Contact this requester”
                            provided in
                            the task.</span></p>
                    <p style="line-height: 1;"><span style="font-family: Calibri, sans-serif;">For questions about your
                            rights as a research participant or to discuss problems, complaints, or concerns about a
                            research study, or to obtain information, or offer input, please contact the NCSU Human
                            Subjects Office at 123-xxx-1234 or
                            at XXX@ncsu.edu.</span></p>
                    <h6 style="line-height: 1;"><span style="font-family: Calibri, sans-serif; font-weight: bold;">CAN I
                            WITHDRAW FROM THE STUDY?</span></h6>

                    <p style="line-height: 1;"><span style="font-family: Calibri, sans-serif;">If you decide to
                            participate in this study, you can change your mind and decide to leave the study at any
                            time by
                            returning the task. If the task is rejected your data will be discarded completely.</span></p>
                    <p style="line-height: 1;"><span style="font-family: Calibri, sans-serif;">Your participation may be
                            terminated by the investigator without regard to your consent in the following
                            circumstances:
                            you cannot annotate the videos following the instructions.</span></p>
                    <p style="line-height: 1;"><span style="font-family: Calibri, sans-serif;">Thank you for agreeing to
                            participate in our research. Before you begin, please note that the data you provide may be
                            collected and used by Prolific as per its privacy agreement. Following prolific policies, we may
                            reject your work if the task
                            was not completed correctly, or the instructions were not followed. You must be 18 or older
                            to participate in this
                            research.</span></p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" id="welcomeMsgNextBtn" onclick="RecordConsent()">I Agree</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Commitment Request Modal -->
    <div class="modal fade" id="commitmentModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
        aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-scrollable" id="commitmentModalDialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="staticBackdropLabel">Commitment Request</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
                        style="display:none;">
                    </button>
                </div>
                <div class="modal-body" id="modalCommitmentMessage">
                    <p>We care about the quality of the data. Please carefully follow the instructions and pay attention while completing the task.</p>
                    <h5>Do you commit to providing thoughtful answers to the questions in this task?</h5>
                    <div class="d-flex flex-column align-items-center">
                        <div class="mb-1">
                            <input type="radio" class="btn-check" id="commitAmbiguousRadio" name="commitAnswer"
                                value="ambiguous" autocomplete="off">
                            <label class="btn btn-sm btn-outline-primary" for="commitAmbiguousRadio"> I cannot promise
                                either way</label>
                        </div>
                        <div class="mb-1">
                            <input type="radio" class="btn-check" id="commitYesRadio" name="commitAnswer" value="yes"
                                autocomplete="off">
                            <label class="btn btn-sm btn-outline-primary" for="commitYesRadio">Yes, I will</label>
                        </div>
                        <div>
                            <input type="radio" class="btn-check" id="commitNoRadio" name="commitAnswer" value="no"
                                autocomplete="off">
                            <label class="btn btn-sm btn-outline-primary" for="commitNoRadio">No, I will not</label>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" id="proceedExperimentBtn"
                        onclick="ProceedToExperiment()">Proceed to Experiment</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="instructionsModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-xl modal-dialog-scrollable" id="instructionsModalDialog">
            <div class="modal-content">
                <div class="modal-header" >
                    <h5 class="modal-title">Legend and Instructions: Please read them carefully, You need to pass a <strong>short quiz</strong> to attempt the task.</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
                        style="display:none;">
                    </button>
                </div>
                <div class="modal-body" id="instructionsModalHolder">
                    <ul class="list-group">
                        <li class="list-group-item">In this experiment, you will watch some videos. These videos show how a <strong>self-driving car</strong> or <strong>ego car</strong> makes driving decisions based on the motions and intentions of pedestrians and other cars.</li>
                        <li class="list-group-item">Before you attempt the task, Please review these guidelines to understand the legends and interface designs. After reading the instructions, you'll take a <strong>short quiz</strong> to make sure you're ready to begin the experiment.</li>
                    </ul>
                    <div id="legend">
                        <div class="d-flex flex-column align-items-center">
                            <div>
                                <h5>Legend</h5>
                            </div>
                                <img class="img-fluid" src="./assets/images/legend-all-exported-table-picture3.png" alt="Legend">
                        </div>
                    </div>                    
                    <!-- ordered list of instructions -->
                    <ol class="list-group list-group-numbered">
                        <li class="list-group-item mt-2">You will see the <strong>speed and driving decision statuses</strong> of self-driving car (indicated by yellow arrow.)
                            <div class="row d-flex justify-content-around mt-1 mb-1">
                                <div class="col-sm-6 d-flex flex-column align-items-center">
                                    <img class="img-fluid" src="./assets/images/speed-status.png">
                                        <p>Speed status</p>                            
                                </div>
                                <div class="col-md-6 d-flex flex-column align-items-center">
                                    <img class="img-fluid" src="./assets/images/car-direction-status.png">
                                    <p>Direction status</p>                            
                                </div>
                            </div>                            
                        </li>
                        <li class="list-group-item mt-2">Self-driving car's detection of the <strong>pedestrians and other cars</strong> (indicated by yellow arrow):
                            <div class="row d-flex justify-content-around mt-1 mb-1">
                                <div class="col-sm-6 d-flex flex-column align-items-center">
                                        <img class="img-fluid" src="./assets/images/ego-pedes-detection.png">
                                        <p>Pedestrian detection (red boxes)</p>                            
                                </div>
                                <div class="col-md-6 d-flex flex-column align-items-center">
                                    <img class="img-fluid" src="./assets/images/ego-vehicle-detection.png">
                                    <p>Car detection (yellow boxes)</p>                            
                                </div>
                            </div>                            
                        </li>
                        <li class="list-group-item mt-2">Self-driving car's understanding of the <strong>crossing intention and motion of pedestrians and cars</strong>(indicated by yellow arrow):
                            <div class="row d-flex justify-content-around mt-1 mb-1">
                                <div class="col-sm-6 d-flex flex-column align-items-center">
                                        <img class="img-fluid" src="./assets/images/ego-pedes-intent-detection.png">
                                        <p>Pedestrian's crossing intention before car</p>                            
                                </div>
                                <div class="col-md-6 d-flex flex-column align-items-center">
                                    <img class="img-fluid" src="./assets/images/ego-pedes-direction-highlight.png">
                                    <p>Direction of motion of the pedestrian</p>                            
                                </div>
                            </div>                            
                        </li>
                        <li class="list-group-item mt-2">The video will automatically pause at certain moments. At these moments, a snapshot of the video with a text explanation will appear to the right side of the video.</li>
                            <div class="row d-flex justify-content-around mt-1 mb-1">
                                <div class="col-sm-6 d-flex flex-column align-items-center align-self-end">                                
                                    <img style="width: 100%;"
                                    src="./assets/videos//snapshot_appearance_level4.jpg">
                                    <p>Appearance of Snapshot at paused moments.</p>                            
                                </div>                                  
                                <!-- <div class="col-sm-6 d-flex flex-column align-items-center align-self-end">
                                        <video style="width: 100%;"
                                        src="./assets/videos//snapshot_appearance_level4.jpg"
                                        type="video/mp4" controls loop autoplay>
                                        </video>
                                        <p>Appearance of Snapshot at paused moments</p>                            
                                </div> -->
                                <div class="col-sm-6 d-flex flex-column align-items-center ">                                
                                    <img style="width: 90%;"
                                    src="./assets/videos//explanation_highlight_level4.jpg">
                                    <p>Explanation of why AI system is braking.</p>                            
                                </div>                                
                            </div>                            
                        </li>
                        <li class="list-group-item">Click the snapshot to zoom-in. Click the play button to continue watching the video.</li>
                        <li class="list-group-item">After watching the videos, you will answer some questions about these visualizations and self driving technology. This should take about 7-8 minutes.</li>
                        <li class="list-group-item">You need to pass the quiz to start the experiment. You can return to this page if you fail the quiz.</li>                       
                    </ol>
                    <div class="mt-2 d-flex justify-content-end">
                        <button id="quizBtn" onclick="ShowQuiz()" type="button" class="btn btn-primary" data-bs-dismiss="modal">I'm ready to take the Quiz</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="quizModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-xl modal-dialog-scrollable" id="quizModalDialog">
            <div class="modal-content">
                <div class="modal-header" >
                    <h5 class="modal-title">Quiz</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
                        style="display:none;">
                    </button>
                </div>
                <div class="modal-body" id="quizModalHolder">                   
                    <!-- ordered list of instructions -->
                    <p class="fs-5">Please answer all the questions below based on the snapshot below. To pass the quiz, you need to <strong>correctly answer all the questions</strong>.</p>
                    <div class="d-flex align-items-center flex-column">                        
                        <img class="img-fluid" style="width: 80%;" src="./assets/images/quiz-snapshot-L1.png">
                        <p>A snapshot of a self-driving car's recording.</p> 
                    </div>                          
                    <ol class="list-group list-group-numbered">
                        <li class="list-group-item">Which option best describes the direction of the self-driving car?
                            <div class="d-flex align-items-start">
                                <div class="mb-1">
                                    <input type="radio" class="form-check-input me-1" id="qEgoDirectionLeft" name="qEgoDirection" value="turning_left"
                                        autocomplete="off">
                                    <label class="form-check-label me-3" for="qEgoDirectionLeft">Turning Left</label>
                                </div>
                                <div>
                                    <input type="radio" class="form-check-input me-1" id="qEgoDirectionStraight" name="qEgoDirection" value="straight"
                                        autocomplete="off">
                                        <label class="form-check-label me-3" for="qEgoDirectionStraight">Straight</label>
                                </div>
                                <div>
                                    <input type="radio" class="form-check-input me-1" id="qEgoDirectionRight" name="qEgoDirection" value="turning_right"
                                        autocomplete="off">
                                        <label class="form-check-label me-1" for="qEgoDirectionRight">Turning Right</label>
                                </div>
                            </div>
                        </li>
                        
                        <li class="list-group-item">Which option best describes the speed-change of the self-driving car?
                            <div class="d-flex align-items-start">
                                <div class="mb-1">
                                    <input type="radio" class="form-check-input me-1" id="qEgoSpeedAcc" name="qEgoSpeed" value="accelarate"
                                        autocomplete="off">
                                    <label class="form-check-label me-3" for="qEgoSpeedAcc">Speeding Up</label>
                                </div>
                                <div>
                                    <input type="radio" class="form-check-input me-1" id="qEgoSpeedMaintain" name="qEgoSpeed" value="maintain"
                                        autocomplete="off">
                                        <label class="form-check-label me-3" for="qEgoSpeedMaintain">Maintain</label>
                                </div>
                                <div>
                                    <input type="radio" class="form-check-input me-1" id="qEgoSpeedSlowing" name="qEgoSpeed" value="slowing_down"
                                        autocomplete="off">
                                        <label class="form-check-label me-1" for="qEgoSpeedSlowing">Slowing Down</label>
                                </div>
                            </div>                            
                        </li>
                        <li class="list-group-item">What does the self-driving car think of the crossing intention of the detected pedestrian?
                            <div class="d-flex align-items-start">
                                <div class="mb-1">
                                    <input type="radio" class="form-check-input me-1" id="qPedesIntentUnsure" name="qPedesIntent" value="unsure"
                                        autocomplete="off">
                                    <label class="form-check-label me-3" for="qPedesIntentUnsure">Unsure</label>
                                </div>
                                <div>
                                    <input type="radio" class="form-check-input me-1" id="qPedesIntentCross" name="qPedesIntent" value="cross"
                                        autocomplete="off">
                                        <label class="form-check-label me-3" for="qPedesIntentCross">Cross</label>
                                </div>
                                <div>
                                    <input type="radio" class="form-check-input me-1" id="qPedesIntentNotCross" name="qPedesIntent" value="not_cross"
                                        autocomplete="off">
                                        <label class="form-check-label me-1" for="qPedesIntentNotCross">Not Cross</label>
                                </div>
                            </div>                             
                        </li>
                        <li class="list-group-item">What does the self-driving car think of the movement direction of the detected pedestrian?
                            <div class="d-flex align-items-start">
                                <div class="mb-2 d-flex align-items-center">
                                    <input type="radio" class="form-check-input me-2" id="qPedesDirectionForward" name="qPedesDirection" value="forward" autocomplete="off">
                                    <label class="form-check-label pe-4" for="qPedesDirectionForward">
                                        <img class="img-fluid" style="width: 40px;" src="./assets/icons/straight.png">
                                    </label>
                                </div>
                                <div class="mb-2 d-flex align-items-center">
                                    <input type="radio" class="form-check-input me-2" id="qPedesDirectionBackward" name="qPedesDirection" value="backward" autocomplete="off">
                                    <label class="form-check-label pe-4" for="qPedesDirectionBackward">
                                        <img class="img-fluid" style="width: 40px;" src="./assets/icons/straight-reverse.png">
                                    </label>
                                </div>
                                <div class="mb-2 d-flex align-items-center">
                                    <input type="radio" class="form-check-input me-2" id="qPedesDirectionRight" name="qPedesDirection" value="right" autocomplete="off">
                                    <label class="form-check-label pe-4" for="qPedesDirectionRight">
                                        <img class="img-fluid" style="width: 40px;" src="./assets/icons/right_turn.png">
                                    </label>
                                </div>
                                <div class="mb-2 d-flex align-items-center">
                                    <input type="radio" class="form-check-input me-2" id="qPedesDirectionLeft" name="qPedesDirection" value="left" autocomplete="off">
                                    <label class="form-check-label pe-4" for="qPedesDirectionLeft">
                                        <img class="img-fluid" style="width: 40px;" src="./assets/icons/left_turn.png">
                                    </label>
                                </div>
                            </div>
                        </li>                          
                        <li class="list-group-item">What does the self-driving car think of the movement direction of the identified car?
                            <div class="d-flex align-items-start">
                                <div class="mb-2 d-flex align-items-center">
                                    <input type="radio" class="form-check-input me-2" id="qCarDirectionForward" name="qCarDirection" value="forward" autocomplete="off">
                                    <label class="form-check-label pe-4" for="qCarDirectionForward">
                                        <img class="img-fluid" style="width: 40px;" src="./assets/icons/straight.png">
                                    </label>
                                </div>
                                <div class="mb-2 d-flex align-items-center">
                                    <input type="radio" class="form-check-input me-2" id="qCarDirectionBackward" name="qCarDirection" value="backward" autocomplete="off">
                                    <label class="form-check-label pe-4" for="qCarDirectionBackward">
                                        <img class="img-fluid" style="width: 40px;" src="./assets/icons/straight-reverse.png">
                                    </label>
                                </div>
                                <div class="mb-2 d-flex align-items-center">
                                    <input type="radio" class="form-check-input me-2" id="qCarDirectionRight" name="qCarDirection" value="right" autocomplete="off">
                                    <label class="form-check-label pe-4" for="qCarDirectionRight">
                                        <img class="img-fluid" style="width: 40px;" src="./assets/icons/right_turn.png">
                                    </label>
                                </div>
                                <div class="mb-2 d-flex align-items-center">
                                    <input type="radio" class="form-check-input me-2" id="qCarDirectionLeft" name="qCarDirection" value="left" autocomplete="off">
                                    <label class="form-check-label pe-4" for="qCarDirectionLeft">
                                        <img class="img-fluid" style="width: 40px;" src="./assets/icons/left_turn.png">
                                    </label>
                                </div>
                            </div>
                        </li>                        
                    </ol>
                    <div class="mt-2 d-flex justify-content-end">
                        <button id="quizSubmitBtn" onclick="reviseInstructions()" type="button" class="btn btn-secondary me-2" data-bs-dismiss="modal">Instructions Page</button>
                    <button id="quizSubmitBtn" onclick="submitQuiz()" type="button" class="btn btn-primary">Submit the answers</button>
                    </div>
                </div>
            </div>
        </div>
    </div>        
    <!-- Background question Modal -->
    <div class="modal fade" id="backgroundQuestionModal" data-bs-backdrop="static" data-bs-keyboard="false"
        tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-scrollable" id="backgroundQuestionModalDialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="staticBackdropLabel">About You (page 1 of 5)</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
                        style="display:none;">
                    </button>
                </div>
                <div class="modal-body" id="backgroundQuestionsHolder">
                    <!-- background questions about age, gender, state location, driving habits -->
                    <!-- what is your age -->
                    <div class="mb-3">
                        <label for="ageInput" class="form-label">1. What is your age?</label>
                        <input type="number" class="form-control" id="ageInput" placeholder="Enter your age, e.g., 19">
                    </div>
                    <!-- what is your gender -->
                    <div class="mb-3">
                        <label for="genderInput" class="form-label">2. What is your gender?</label>
                        <input type="text" class="form-control" id="genderInput" placeholder="Enter your gender">
                    </div>
                    
                    <div class="mb-3">
                        <label for="hispanic_latino_reponse_Radio_input" class="form-label">3. Are you Hispanic or Latino?</label>
                        <div class="d-flex align-items-start">
                            <div class="mb-1">
                                <input type="radio" class="form-check-input" id="hispanic_yes" name="hispanic_latino_reponse_Radio_input" value="hispanic_yes"
                                    autocomplete="off">
                                <label class="form-check-label me-1" for="hispanic_yes">Yes</label>
                            </div>
                            <div>
                                <input type="radio" class="form-check-input" id="hispanic_no" name="hispanic_latino_reponse_Radio_input" value="hispanic_no"
                                    autocomplete="off">
                                <label class="form-check-label me-1" for="hispanic_no">No</label>
                            </div>
                            <div>
                                <input type="radio" class="form-check-input" id="hispanic_wont_say" name="hispanic_latino_reponse_Radio_input" value="hispanic_wont_say"
                                    autocomplete="off">
                                <label class="form-check-label me-1" for="hispanic_wont_say">Prefer Not to say</label>
                            </div>
                        </div>
                    </div>
                    <div class="mb-3"> 
                        <!-- https://ir.aa.ufl.edu/surveys/race-and-ethnicity-survey/ -->
                        <!-- https://www.census.gov/quickfacts/fact/note/US/RHI625222 -->
                        <label class="form-label">4. Please select your race. (You can choose one or more races if applicable)</label>
                        <div class="flex-column">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" name="raceQuestions[]" id="white" value="white" aria-label="White">
                                <label class="form-check-label" for="white">White</label>
                            </div>      
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" name="raceQuestions[]" id="black_or_african_american" value="black_or_african_american" aria-label="Black or African American">
                                <label class="form-check-label" for="black_or_african_american">Black or African American</label>
                            </div>   
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" name="raceQuestions[]" id="american_indian_or_alaskan_native" value="american_indian_or_alaskan_native" aria-label="American Indian and Alaskan Native">
                                <label class="form-check-label" for="american_indian_or_alaskan_native">American Indian and Alaskan Native</label>
                            </div>  
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" name="raceQuestions[]" id="asian" value="asian" aria-label="Asian">
                                <label class="form-check-label" for="asian">Asian</label>
                            </div>                                                                                                            
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" name="raceQuestions[]" id="native_hawaiian_or_other_pacific_islander" value="native_hawaiian_or_other_pacific_islander" aria-label="Native Hawaiian and Other Pacific Islander">
                                <label class="form-check-label" for="native_hawaiian_or_other_pacific_islander">Native Hawaiian and Other Pacific Islander</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" name="raceQuestions[]" id="prefer_not_to_say_race" value="prefer_not_to_say_race" aria-label="Prefer Not to say">
                                <label class="form-check-label" for="prefer_not_to_say_race">Prefer Not to say</label>
                            </div>  
                        </div>
                    </div>                                        
                    <div class="mb-3">
                        <label for="attnChk1Input" class="form-label">5. In this experiment, was any video recorded at nighttime??</label>
                        <div class="d-flex align-items-start">
                            <div class="mb-1">
                                <input type="radio" class="btn-check" id="chkQ1YesRadio" name="chkQ1RadioInput" value="yes"
                                    autocomplete="off">
                                <label class="btn btn-sm btn-outline-primary me-1" for="chkQ1YesRadio">Yes</label>
                            </div>
                            <div>
                                <input type="radio" class="btn-check" id="chkQ1NoRadio" name="chkQ1RadioInput" value="no"
                                    autocomplete="off">
                                <label class="btn btn-sm btn-outline-primary ms-1" for="chkQ1NoRadio">No</label>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary"
                        onclick="GoToUeqsQuestionnaire()">Next</button>
                </div>
            </div>
        </div>
    </div>
    <!-- STS-AD QUESTIONNAIRE Modal-->
    <div class="modal fade" id="stsADModal" data-bs-backdrop="static" data-bs-keyboard="false"
        tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-scrollable" id="stsADModalDialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="stsADModalTitle">Please answer these questions based on the videos you have just watched. (page 3 of 5)</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
                        style="display:none;">
                    </button>
                </div>
                <div class="modal-body" id="stsADQuestionsHolder">
                    <!-- questions from situational trust towards Autonmous Driving questionnaire -->
                    <div class="modal-body" id="stsADQuestionsHolder">
                        <!-- questions from questionnaire with 5 point Likert-scale -->
                        <div class="mb-3">
                        <!-- <div class="mb-3" style="background-color:#D3D3D3"> -->
                            <label class="form-label">1. I trust the automation in these situations.</label>
                            <div>
                              <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="stsADQuestion1" id="stsADQ1StronglyDisagree" value="1">
                                <label class="form-check-label" for="stsADq1StronglyDisagree">Strongly Disagree</label>
                              </div>
                              <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="stsADQuestion1" id="stsADQ1Disagree" value="2">
                                <label class="form-check-label" for="stsADQ1Disagree">Disagree</label>
                              </div>
                              <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="stsADQuestion1" id="stsADQ1Neutral" value="3">
                                <label class="form-check-label" for="stsADQ1Neutral">Neutral</label>
                              </div>
                              <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="stsADQuestion1" id="stsADQ1Agree" value="4">
                                <label class="form-check-label" for="stsADQ1Agree">Agree</label>
                              </div>
                              <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="stsADQuestion1" id="stsADQ1StronglyAgree" value="5">
                                <label class="form-check-label" for="stsADQ1StronglyAgree">Strongly Agree</label>
                              </div>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">2. I would have performed better than the automated vehicle in these situations.</label>
                            <div>
                              <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="stsADQuestion2" id="stsADQ2StronglyDisagree" value="1">
                                <label class="form-check-label" for="stsADQ2StronglyDisagree">Strongly Disagree</label>
                              </div>
                              <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="stsADQuestion2" id="stsADQ2Disagree" value="2">
                                <label class="form-check-label" for="stsADQ2Disagree">Disagree</label>
                              </div>
                              <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="stsADQuestion2" id="stsADQ2Neutral" value="3">
                                <label class="form-check-label" for="stsADQ2Neutral">Neutral</label>
                              </div>
                              <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="stsADQuestion2" id="stsADQ2Agree" value="4">
                                <label class="form-check-label" for="stsADQ2Agree">Agree</label>
                              </div>
                              <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="stsADQuestion2" id="stsADQ2StronglyAgree" value="5">
                                <label class="form-check-label" for="stsADQ2StronglyAgree">Strongly Agree</label>
                              </div>
                            </div>
                          </div>
                          
                          <div class="mb-3">
                            <label class="form-label">3. In these situations, the automated vehicle performs well enough for me to engage in other activities (such as reading).</label>
                            <div>
                              <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="stsADQuestion3" id="stsADQ3StronglyDisagree" value="1">
                                <label class="form-check-label" for="stsADQ3StronglyDisagree">Strongly Disagree</label>
                              </div>
                              <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="stsADQuestion3" id="stsADQ3Disagree" value="2">
                                <label class="form-check-label" for="stsADQ3Disagree">Disagree</label>
                              </div>
                              <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="stsADQuestion3" id="stsADQ3Neutral" value="3">
                                <label class="form-check-label" for="stsADQ3Neutral">Neutral</label>
                              </div>
                              <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="stsADQuestion3" id="stsADQ3Agree" value="4">
                                <label class="form-check-label" for="stsADQ3Agree">Agree</label>
                              </div>
                              <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="stsADQuestion3" id="stsADQ3StronglyAgree" value="5">
                                <label class="form-check-label" for="stsADQ3StronglyAgree">Strongly Agree</label>
                              </div>
                            </div>
                          </div>
                          
                          <div class="mb-3">
                            <label class="form-label">4. The situations were risky.</label>
                            <div>
                              <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="stsADQuestion4" id="stsADQ4StronglyDisagree" value="1">
                                <label class="form-check-label" for="stsADQ4StronglyDisagree">Strongly Disagree</label>
                              </div>
                              <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="stsADQuestion4" id="stsADQ4Disagree" value="2">
                                <label class="form-check-label" for="stsADQ4Disagree">Disagree</label>
                              </div>
                              <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="stsADQuestion4" id="stsADQ4Neutral" value="3">
                                <label class="form-check-label" for="stsADQ4Neutral">Neutral</label>
                              </div>
                              <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="stsADQuestion4" id="stsADQ4Agree" value="4">
                                <label class="form-check-label" for="stsADQ4Agree">Agree</label>
                              </div>
                              <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="stsADQuestion4" id="stsADQ4StronglyAgree" value="5">
                                <label class="form-check-label" for="stsADQ4StronglyAgree">Strongly Agree</label>
                              </div>
                            </div>
                          </div>
                          
                          <div class="mb-3">
                            <label class="form-label">5. The automated vehicle made an unsafe judgement in these situations.</label>
                            <div>
                              <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="stsADQuestion5" id="stsADQ5StronglyDisagree" value="1">
                                <label class="form-check-label" for="stsADQ5StronglyDisagree">Strongly Disagree</label>
                              </div>
                              <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="stsADQuestion5" id="stsADQ5Disagree" value="2">
                                <label class="form-check-label" for="stsADQ5Disagree">Disagree</label>
                              </div>
                              <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="stsADQuestion5" id="stsADQ5Neutral" value="3">
                                <label class="form-check-label" for="stsADQ5Neutral">Neutral</label>
                              </div>
                              <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="stsADQuestion5" id="stsADQ5Agree" value="4">
                                <label class="form-check-label" for="stsADQ5Agree">Agree</label>
                              </div>
                              <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="stsADQuestion5" id="stsADQ5StronglyAgree" value="5">
                                <label class="form-check-label" for="stsADQ5StronglyAgree">Strongly Agree</label>
                              </div>
                            </div>
                          </div>
                          
                          <div class="mb-3">
                            <label class="form-label">6. The automated vehicle reacted appropriately to the environment.</label>
                            <div>
                              <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="stsADQuestion6" id="stsADQ6StronglyDisagree" value="1">
                                <label class="form-check-label" for="stsADQ6StronglyDisagree">Strongly Disagree</label>
                              </div>
                              <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="stsADQuestion6" id="stsADQ6Disagree" value="2">
                                <label class="form-check-label" for="stsADQ6Disagree">Disagree</label>
                              </div>
                              <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="stsADQuestion6" id="stsADQ6Neutral" value="3">
                                <label class="form-check-label" for="stsADQ6Neutral">Neutral</label>
                              </div>
                              <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="stsADQuestion6" id="stsADQ6Agree" value="4">
                                <label class="form-check-label" for="stsADQ6Agree">Agree</label>
                              </div>
                              <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="stsADQuestion6" id="stsADQ6StronglyAgree" value="5">
                                <label class="form-check-label" for="stsADQ6StronglyAgree">Strongly Agree</label>
                              </div>
                            </div>
                          </div>
                                                  
                    </div>
                                                     
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" id="ueqsQBtn"
                        onclick="GoToPiitQuestionnaire()">Next</button>
                </div>
            </div>
        </div>
    </div>

    <!-- UEQS QUESTIONNAIRE Modal-->
    <div class="modal fade" id="ueqsModal" data-bs-backdrop="static" data-bs-keyboard="false"
        tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-scrollable" id="ueqsModalDialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="ueqsModalTitle">How do you feel about the interface of the self-driving car to show how the system works? (page 2 of 5)</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
                        style="display:none;">
                    </button>
                </div>
                    <!-- questions from situational trust towards Autonmous Driving questionnaire -->
                <div class="modal-body" id="ueqsQuestionsHolder">
                    <!-- show the UI here as image -->
                    <div class="d-flex align-items-center flex-column">                        
                        <img class="img-fluid" style="width: 80%;" src="./assets/videos/explanation_highlight_level4.jpg">
                        <p>Explanation Interface showing how the AI system works.</p>
                    </div>
                    <!-- questions from questionnaire with 5 point Likert-scale -->
                    <form>
                        <div class="ueqs_row" style="width: 50%;" >
                          <div class="ueqs_column">obstructive</div>
                          <div class="ueqs_column">
                            <input type="radio" name="obstructiveSupportive" id="obstructiveSupportive1" value="1">
                            <input type="radio" name="obstructiveSupportive" id="obstructiveSupportive2" value="2">
                            <input type="radio" name="obstructiveSupportive" id="obstructiveSupportive3" value="3">
                            <input type="radio" name="obstructiveSupportive" id="obstructiveSupportive4" value="4">
                            <input type="radio" name="obstructiveSupportive" id="obstructiveSupportive5" value="5">
                          </div>
                          <div class="ueqs_column">supportive</div>
                        </div>
                        
                        <div class="ueqs_row" style="width: 50%;">
                          <div class="ueqs_column">complicated</div>
                          <div class="ueqs_column">
                            <input type="radio" name="complicatedEasy" id="complicatedEasy1" value="1">
                            <input type="radio" name="complicatedEasy" id="complicatedEasy2" value="2">
                            <input type="radio" name="complicatedEasy" id="complicatedEasy3" value="3">
                            <input type="radio" name="complicatedEasy" id="complicatedEasy4" value="4">
                            <input type="radio" name="complicatedEasy" id="complicatedEasy5" value="5">
                          </div>
                          <div class="ueqs_column">easy</div>
                        </div>
                        
                        <div class="ueqs_row" style="width: 50%;">
                          <div class="ueqs_column">inefficient</div>
                          <div class="ueqs_column">
                            <input type="radio" name="inefficientEfficient" id="inefficientEfficient1" value="1">
                            <input type="radio" name="inefficientEfficient" id="inefficientEfficient2" value="2">
                            <input type="radio" name="inefficientEfficient" id="inefficientEfficient3" value="3">
                            <input type="radio" name="inefficientEfficient" id="inefficientEfficient4" value="4">
                            <input type="radio" name="inefficientEfficient" id="inefficientEfficient5" value="5">
                          </div>
                          <div class="ueqs_column">efficient</div>
                        </div>
                        <div class="ueqs_row" style="width: 50%;">
                            <div class="ueqs_column">confusing</div>
                            <div class="ueqs_column">
                              <input type="radio" name="confusingClear" id="confusingClear1" value="1">
                              <input type="radio" name="confusingClear" id="confusingClear2" value="2">
                              <input type="radio" name="confusingClear" id="confusingClear3" value="3">
                              <input type="radio" name="confusingClear" id="confusingClear4" value="4">
                              <input type="radio" name="confusingClear" id="confusingClear5" value="5">
                            </div>
                            <div class="ueqs_column">clear</div>
                          </div>
                          
                          <div class="ueqs_row" style="width: 50%;">
                            <div class="ueqs_column">boring</div>
                            <div class="ueqs_column">
                              <input type="radio" name="boringExciting" id="boringExciting1" value="1">
                              <input type="radio" name="boringExciting" id="boringExciting2" value="2">
                              <input type="radio" name="boringExciting" id="boringExciting3" value="3">
                              <input type="radio" name="boringExciting" id="boringExciting4" value="4">
                              <input type="radio" name="boringExciting" id="boringExciting5" value="5">
                            </div>
                            <div class="ueqs_column">exciting</div>
                          </div>
                          
                          <div class="ueqs_row" style="width: 50%;">
                            <div class="ueqs_column">not interesting</div>
                            <div class="ueqs_column">
                              <input type="radio" name="notInterestingInteresting" id="notInterestingInteresting1" value="1">
                              <input type="radio" name="notInterestingInteresting" id="notInterestingInteresting2" value="2">
                              <input type="radio" name="notInterestingInteresting" id="notInterestingInteresting3" value="3">
                              <input type="radio" name="notInterestingInteresting" id="notInterestingInteresting4" value="4">
                              <input type="radio" name="notInterestingInteresting" id="notInterestingInteresting5" value="5">
                            </div>
                            <div class="ueqs_column">interesting</div>
                          </div>
                          
                          <div class="ueqs_row" style="width: 50%;">
                            <div class="ueqs_column">conventional</div>
                            <div class="ueqs_column">
                              <input type="radio" name="conventionalInventive" id="conventionalInventive1" value="1">
                              <input type="radio" name="conventionalInventive" id="conventionalInventive2" value="2">
                              <input type="radio" name="conventionalInventive" id="conventionalInventive3" value="3">
                              <input type="radio" name="conventionalInventive" id="conventionalInventive4" value="4">
                              <input type="radio" name="conventionalInventive" id="conventionalInventive5" value="5">
                            </div>
                            <div class="ueqs_column">inventive</div>
                          </div>
                          
                          <div class="ueqs_row" style="width: 50%;">
                            <div class="ueqs_column">usual</div>
                            <div class="ueqs_column">
                              <input type="radio" name="usualLeadingEdge" id="usualLeadingEdge1" value="1">
                              <input type="radio" name="usualLeadingEdge" id="usualLeadingEdge2" value="2">
                              <input type="radio" name="usualLeadingEdge" id="usualLeadingEdge3" value="3">
                              <input type="radio" name="usualLeadingEdge" id="usualLeadingEdge4" value="4">
                              <input type="radio" name="usualLeadingEdge" id="usualLeadingEdge5" value="5">
                            </div>
                            <div class="ueqs_column">leading edge</div>
                          </div>                          
                    </form>                      
                </div>
                                                     
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" id="ueqsQBtn"
                        onclick="GoToStsAdQuestionnaire()">Next</button>
                </div>
            </div>
        </div>
    </div>    
    <!-- piit Questionnaire Modal -->
    <div class="modal fade" id="piitModal" data-bs-backdrop="static" data-bs-keyboard="false"
    tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-scrollable" id="piitModalDialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="piitModalTitle">Please tell us to what extent you are interested in trying out new features or add-ons. (page 4 of 5)</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
                        style="display:none;">
                    </button>
                </div>
                <!-- questions from situational trust towards Autonmous Driving questionnaire -->
                <div class="modal-body" id="piitQuestionsHolder">
                    <!-- questions from questionnaire with 5 point Likert-scale -->
                    <div class="mb-3">
                    <!-- <div class="mb-3" style="background-color:#D3D3D3"> -->
                        <label class="form-label">1. If I heard about a new technology, I would look for ways to experiment with it. 
                        </label>
                        <div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="piitQuestion1" id="piitQ1StronglyDisagree" value="1">
                                <label class="form-check-label" for="piitq1StronglyDisagree">Strongly Disagree</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="piitQuestion1" id="piitQ1Disagree" value="2">
                                <label class="form-check-label" for="piitQ1Disagree">Disagree</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="piitQuestion1" id="piitQ1Neutral" value="3">
                                <label class="form-check-label" for="piitQ1Neutral">Neutral</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="piitQuestion1" id="piitQ1Agree" value="4">
                                <label class="form-check-label" for="piitQ1Agree">Agree</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="piitQuestion1" id="piitQ1StronglyAgree" value="5">
                                <label class="form-check-label" for="piitQ1StronglyAgree">Strongly Agree</label>
                            </div>                        
                        </div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">2. Among my peers, I am usually the first to try out new technologies.</label>
                        <div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="piitQuestion2" id="piitQ2StronglyDisagree" value="1">
                                <label class="form-check-label" for="piitQ2StronglyDisagree">Strongly Disagree</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="piitQuestion2" id="piitQ2Disagree" value="2">
                                <label class="form-check-label" for="piitQ2Disagree">Disagree</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="piitQuestion2" id="piitQ2Neutral" value="3">
                                <label class="form-check-label" for="piitQ2Neutral">Neutral</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="piitQuestion2" id="piitQ2Agree" value="4">
                                <label class="form-check-label" for="piitQ2Agree">Agree</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="piitQuestion2" id="piitQ2StronglyAgree" value="5">
                                <label class="form-check-label" for="piitQ2StronglyAgree">Strongly Agree</label>
                            </div>                            
                        </div>
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">3. In general, I am hesitant to try out new technologies.</label>
                        <div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="piitQuestion3" id="piitQ3StronglyDisagree" value="1">
                                <label class="form-check-label" for="piitQ3StronglyDisagree">Strongly Disagree</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="piitQuestion3" id="piitQ3Disagree" value="2">
                                <label class="form-check-label" for="piitQ3Disagree">Disagree</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="piitQuestion3" id="piitQ3Neutral" value="3">
                                <label class="form-check-label" for="piitQ3Neutral">Neutral</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="piitQuestion3" id="piitQ3Agree" value="4">
                                <label class="form-check-label" for="piitQ3Agree">Agree</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="piitQuestion3" id="piitQ3StronglyAgree" value="5">
                                <label class="form-check-label" for="piitQ3StronglyAgree">Strongly Agree</label>
                            </div>                            
                        </div>
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">4. I like to experiment with new technologies.</label>
                        <div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="piitQuestion4" id="piitQ4StronglyDisagree" value="1">
                                <label class="form-check-label" for="piitQ4StronglyDisagree">Strongly Disagree</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="piitQuestion4" id="piitQ4Disagree" value="2">
                                <label class="form-check-label" for="piitQ4Disagree">Disagree</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="piitQuestion4" id="piitQ4Neutral" value="3">
                                <label class="form-check-label" for="piitQ4Neutral">Neutral</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="piitQuestion4" id="piitQ4Agree" value="4">
                                <label class="form-check-label" for="piitQ4Agree">Agree</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="piitQuestion4" id="piitQ4StronglyAgree" value="5">
                                <label class="form-check-label" for="piitQ4StronglyAgree">Strongly Agree</label>
                            </div>                            
                        </div>
                    </div>                    
                </div>                                                 
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" id="piitBtn"
                        onclick="BackgroundQuestionnaire2()">Next</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="backgroundQuestion2Modal" data-bs-backdrop="static" data-bs-keyboard="false"
        tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-scrollable" id="backgroundQuestion2ModalDialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Last Questions (page 5 of 5)</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
                        style="display:none;">
                    </button>
                </div>
                <div class="modal-body" id="backgroundQuestions2Holder">
                    <div class="mb-3">
                        <label class="form-label">1. I want to use technologies that rely on AI.
                        </label>
                        <div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="likeAiRadioInput" id="bgQ1StronglyDisagree" value="1">
                                <label class="form-check-label" for="bgq1StronglyDisagree">Strongly Disagree</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="likeAiRadioInput" id="bgQ1Disagree" value="2">
                                <label class="form-check-label" for="bgQ1Disagree">Disagree</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="likeAiRadioInput" id="bgQ1Neutral" value="3">
                                <label class="form-check-label" for="bgQ1Neutral">Neutral</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="likeAiRadioInput" id="bgQ1Agree" value="4">
                                <label class="form-check-label" for="bgQ1Agree">Agree</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="likeAiRadioInput" id="bgQ1StronglyAgree" value="5">
                                <label class="form-check-label" for="bgQ1StronglyAgree">Strongly Agree</label>
                            </div>                        
                        </div>
                    </div>
                    <div class="mb-3">
                        <label for="rideAvInput" class="form-label">2. Have you ever ridden in a vehicle with the following advanced driving technology?(Click all that apply.)</label>
                        <div class="d-flex align-items-start flex-column">
                            <div class="mb-1">
                                <input type="checkbox" class="btn-check" id="autopilot" name="questionsADS[]" value="autopilot" autocomplete="off">
                                <label class="btn btn-sm btn-outline-primary me-1" for="autopilot">self-driving car, e.g., Tesla auto-pilot, Robotaxis</label>
                            </div>
                            <div class="mb-1">
                                <input type="checkbox" class="btn-check" id="adaptive_cruise_control" name="questionsADS[]" value="adaptive_cruise_control" autocomplete="off">
                                <label class="btn btn-sm btn-outline-primary" for="adaptive_cruise_control">Adaptive Cruise Control</label>
                            </div>
                            <div class="mb-1">
                                <input type="checkbox" class="btn-check" id="lane_assist" name="questionsADS[]" value="lane_assist" autocomplete="off">
                                <label class="btn btn-sm btn-outline-primary" for="lane_assist">Lane Assist</label>
                        </div>                        
                    </div>
                    </div>

                    <div class="mb-3">
                        <label for="attnChk2Input" class="form-label">3. In this experiment, how many videos did you watch?</label>
                        <div class="d-flex align-items-start">
                            <div class="mb-1">
                                <input type="radio" class="btn-check" id="chkQ2RadioValue2" name="chkQ2RadioInput" value="2"
                                    autocomplete="off">
                                <label class="btn btn-sm btn-outline-primary me-1" for="chkQ2RadioValue2">2</label>
                            </div>
                            <div class="mb-1">
                                <input type="radio" class="btn-check" id="chkQ2RadioValue3" name="chkQ2RadioInput" value="3"
                                    autocomplete="off">
                                <label class="btn btn-sm btn-outline-primary ms-1" for="chkQ2RadioValue3">3</label>
                            </div>
                            <div class="mb-1">
                                <input type="radio" class="btn-check" id="chkQ2RadioValue4" name="chkQ2RadioInput" value="4"
                                    autocomplete="off">
                                <label class="btn btn-sm btn-outline-primary ms-1" for="chkQ2RadioValue4">4</label>
                            </div>
                            <div class="mb-1">
                                <input type="radio" class="btn-check" id="chkQ2RadioValue5" name="chkQ2RadioInput" value="5"
                                    autocomplete="off">
                                <label class="btn btn-sm btn-outline-primary ms-1" for="chkQ2RadioValue5">5</label>
                            </div>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">4. I would rather avoid technologies that are based on AI.
                        </label>
                        <div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="dislikeAiRadioInput" id="bgQ4StronglyDisagree" value="1">
                                <label class="form-check-label" for="bgQ4StronglyDisagree">Strongly Disagree</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="dislikeAiRadioInput" id="bgQ4Disagree" value="2">
                                <label class="form-check-label" for="bgQ4Disagree">Disagree</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="dislikeAiRadioInput" id="bgQ4Neutral" value="3">
                                <label class="form-check-label" for="bgQ4Neutral">Neutral</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="dislikeAiRadioInput" id="bgQ4Agree" value="4">
                                <label class="form-check-label" for="bgQ4Agree">Agree</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="dislikeAiRadioInput" id="bgQ4StronglyAgree" value="5">
                                <label class="form-check-label" for="bgQ4StronglyAgree">Strongly Agree</label>
                            </div>                        
                        </div>
                    </div>                    
                </div>
                               
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary"
                        onclick="FinishStudy()" id="finishBtn">Finish</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="attAVModal" data-bs-backdrop="static" data-bs-keyboard="false"
    tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-scrollable" id="attAVModalDialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="attAVModalTitle">Please tell us what you think of Self-driving Technology.</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
                        style="display:none;">
                    </button>
                </div>
                <!-- questions from situational trust towards Autonmous Driving questionnaire -->
                <h6 class="ms-1">Please give us your opinion in terms of your agreement for the following statements:</h6>
                <div class="modal-body" id="attAVQuestionsHolder">
                    <!-- questions from questionnaire with 5 point Likert-scale -->
                    <div class="mb-3">
                    <!-- <div class="mb-3" style="background-color:#D3D3D3"> -->
                        <label class="form-label">1. I would be comfortable with driving or riding in an autonomous or self-driving vehicle. 
                        </label>
                        <div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="attAVQuestion1" id="attAVQ1StronglyDisagree" value="1">
                                <label class="form-check-label" for="attAVq1StronglyDisagree">Strongly Disagree</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="attAVQuestion1" id="attAVQ1Disagree" value="2">
                                <label class="form-check-label" for="attAVQ1Disagree">Disagree</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="attAVQuestion1" id="attAVQ1Neutral" value="3">
                                <label class="form-check-label" for="attAVQ1Neutral">Neutral</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="attAVQuestion1" id="attAVQ1Agree" value="4">
                                <label class="form-check-label" for="attAVQ1Agree">Agree</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="attAVQuestion1" id="attAVQ1StronglyAgree" value="5">
                                <label class="form-check-label" for="attAVQ1StronglyAgree">Strongly Agree</label>
                            </div>                        
                        </div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">2. I would be concerned about driving or riding in an autonomous or self-driving technology.</label>
                        <div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="attAVQuestion2" id="attAVQ2StronglyDisagree" value="1">
                                <label class="form-check-label" for="attAVQ2StronglyDisagree">Strongly Disagree</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="attAVQuestion2" id="attAVQ2Disagree" value="2">
                                <label class="form-check-label" for="attAVQ2Disagree">Disagree</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="attAVQuestion2" id="attAVQ2Neutral" value="3">
                                <label class="form-check-label" for="attAVQ2Neutral">Neutral</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="attAVQuestion2" id="attAVQ2Agree" value="4">
                                <label class="form-check-label" for="attAVQ2Agree">Agree</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="attAVQuestion2" id="attAVQ2StronglyAgree" value="5">
                                <label class="form-check-label" for="attAVQ2StronglyAgree">Strongly Agree</label>
                            </div>                        
                        </div>
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">3. If self-driving technology were now available as optional equipment on my next car purchase, I would buy or lease this technology.</label>
                        <div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="attAVQuestion3" id="attAVQ3StronglyDisagree" value="1">
                                <label class="form-check-label" for="attAVQ3StronglyDisagree">Strongly Disagree</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="attAVQuestion3" id="attAVQ3Disagree" value="2">
                                <label class="form-check-label" for="attAVQ3Disagree">Disagree</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="attAVQuestion3" id="attAVQ3Neutral" value="3">
                                <label class="form-check-label" for="attAVQ3Neutral">Neutral</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="attAVQuestion3" id="attAVQ3Agree" value="4">
                                <label class="form-check-label" for="attAVQ3Agree">Agree</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="attAVQuestion3" id="attAVQ3StronglyAgree" value="5">
                                <label class="form-check-label" for="attAVQ3StronglyAgree">Strongly Agree</label>
                            </div>                        
                        </div>
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">4. I would buy or lease a completely autonomous vehicle (Level 4) if one were available.</label>
                        <div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="attAVQuestion4" id="attAVQ4StronglyDisagree" value="1">
                                <label class="form-check-label" for="attAVQ4StronglyDisagree">Strongly Disagree</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="attAVQuestion4" id="attAVQ4Disagree" value="2">
                                <label class="form-check-label" for="attAVQ4Disagree">Disagree</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="attAVQuestion4" id="attAVQ4Neutral" value="3">
                                <label class="form-check-label" for="attAVQ4Neutral">Neutral</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="attAVQuestion4" id="attAVQ4Agree" value="4">
                                <label class="form-check-label" for="attAVQ4Agree">Agree</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="attAVQuestion4" id="attAVQ4StronglyAgree" value="5">
                                <label class="form-check-label" for="attAVQ4StronglyAgree">Strongly Agree</label>
                            </div>                        
                        </div>
                    </div> 
                    <div class="mb-3">
                        <label class="form-label">5. I think that autonomous vehicles can never be safer than those driven by humans.</label>
                        <div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="attAVQuestion5" id="attAVQ5StronglyDisagree" value="1">
                                <label class="form-check-label" for="attAVQ5StronglyDisagree">Strongly Disagree</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="attAVQuestion5" id="attAVQ5Disagree" value="2">
                                <label class="form-check-label" for="attAVQ5Disagree">Disagree</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="attAVQuestion5" id="attAVQ5Neutral" value="3">
                                <label class="form-check-label" for="attAVQ5Neutral">Neutral</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="attAVQuestion5" id="attAVQ5Agree" value="4">
                                <label class="form-check-label" for="attAVQ5Agree">Agree</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="attAVQuestion5" id="attAVQ5StronglyAgree" value="5">
                                <label class="form-check-label" for="attAVQ5StronglyAgree">Strongly Agree</label>
                            </div>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">6. I think advances in science and technology will allow driverless cars to be as safe as human drivers.</label>
                        <div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="attAVQuestion6" id="attAVQ6StronglyDisagree" value="1">
                                <label class="form-check-label" for="attAVQ6StronglyDisagree">Strongly Disagree</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="attAVQuestion6" id="attAVQ6Disagree" value="2">
                                <label class="form-check-label" for="attAVQ6Disagree">Disagree</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="attAVQuestion6" id="attAVQ6Neutral" value="3">
                                <label class="form-check-label" for="attAVQ6Neutral">Neutral</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="attAVQuestion6" id="attAVQ6Agree" value="4">
                                <label class="form-check-label" for="attAVQ6Agree">Agree</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="attAVQuestion6" id="attAVQ6StronglyAgree" value="5">
                                <label class="form-check-label" for="attAVQ6StronglyAgree">Strongly Agree</label>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Repeat the above structure for questions 7 to the rest of the questions, updating the question label and input names accordingly -->
                    
                    <!-- Question 7 -->
                    <div class="mb-3">
                        <label class="form-label">7. Computers are capable of the same quality of decision making as human drivers.</label>
                        <div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="attAVQuestion7" id="attAVQ7StronglyDisagree" value="1">
                                <label class="form-check-label" for="attAVQ7StronglyDisagree">Strongly Disagree</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="attAVQuestion7" id="attAVQ7Disagree" value="2">
                                <label class="form-check-label" for="attAVQ7Disagree">Disagree</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="attAVQuestion7" id="attAVQ7Neutral" value="3">
                                <label class="form-check-label" for="attAVQ7Neutral">Neutral</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="attAVQuestion7" id="attAVQ7Agree" value="4">
                                <label class="form-check-label" for="attAVQ7Agree">Agree</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="attAVQuestion7" id="attAVQ7StronglyAgree" value="5">
                                <label class="form-check-label" for="attAVQ7StronglyAgree">Strongly Agree</label>
                            </div>
                        </div>
                    </div>

                    <!-- Question 8 -->
                    <div class="mb-3">
                        <label class="form-label">8. I can drive better than a computer.</label>
                        <div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="attAVQuestion8" id="attAVQ8StronglyDisagree" value="1">
                                <label class="form-check-label" for="attAVQ8StronglyDisagree">Strongly Disagree</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="attAVQuestion8" id="attAVQ8Disagree" value="2">
                                <label class="form-check-label" for="attAVQ8Disagree">Disagree</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="attAVQuestion8" id="attAVQ8Neutral" value="3">
                                <label class="form-check-label" for="attAVQ8Neutral">Neutral</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="attAVQuestion8" id="attAVQ8Agree" value="4">
                                <label class="form-check-label" for="attAVQ8Agree">Agree</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="attAVQuestion8" id="attAVQ8StronglyAgree" value="5">
                                <label class="form-check-label" for="attAVQ8StronglyAgree">Strongly Agree</label>
                            </div>
                        </div>
                    </div>

                    <h6>How concerned are you about the following possible scenarios with completely self-driving vehicles (Level 4)?</h6>
                    <!-- <div class="mb-3"></div> -->
                    <!-- Question 9 -->
                    <div class="mb-3">
                        <label class="form-label">9. I would be concerned with riding in a vehicle with no driver controls available (no steering wheel, no brake pedal, and no gas pedal/accelerator)</label>
                        <div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="attAVQuestion9" id="attAVQ9StronglyDisagree" value="1">
                                <label class="form-check-label" for="attAVQ9StronglyDisagree">Strongly Disagree</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="attAVQuestion9" id="attAVQ9Disagree" value="2">
                                <label class="form-check-label" for="attAVQ9Disagree">Disagree</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="attAVQuestion9" id="attAVQ9Neutral" value="3">
                                <label class="form-check-label" for="attAVQ9Neutral">Neutral</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="attAVQuestion9" id="attAVQ9Agree" value="4">
                                <label class="form-check-label" for="attAVQ9Agree">Agree</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="attAVQuestion9" id="attAVQ9StronglyAgree" value="5">
                                <label class="form-check-label" for="attAVQ9StronglyAgree">Strongly Agree</label>
                            </div>
                        </div>
                    </div>

                    <!-- Question 10 -->
                    <div class="mb-3">
                        <label class="form-label">10. I would be concerned with self-driving vehicles moving by themselves from one location to another while unoccupied:</label>
                        <div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="attAVQuestion10" id="attAVQ10StronglyDisagree" value="1">
                                <label class="form-check-label" for="attAVQ10StronglyDisagree">Strongly Disagree</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="attAVQuestion10" id="attAVQ10Disagree" value="2">
                                <label class="form-check-label" for="attAVQ10Disagree">Disagree</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="attAVQuestion10" id="attAVQ10Neutral" value="3">
                                <label class="form-check-label" for="attAVQ10Neutral">Neutral</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="attAVQuestion10" id="attAVQ10Agree" value="4">
                                <label class="form-check-label" for="attAVQ10Agree">Agree</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="attAVQuestion10" id="attAVQ10StronglyAgree" value="5">
                                <label class="form-check-label" for="attAVQ10StronglyAgree">Strongly Agree</label>
                            </div>
                        </div>
                    </div>
                    <!-- Question 11 -->
                    <div class="mb-3">
                        <label class="form-label">11. I would be concerned with commercial vehicles such as heavy trucks or semi-trailer trucks that are completely self-driving:</label>
                        <div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="attAVQuestion11" id="attAVQ11StronglyDisagree" value="1">
                                <label class="form-check-label" for="attAVQ11StronglyDisagree">Strongly Disagree</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="attAVQuestion11" id="attAVQ11Disagree" value="2">
                                <label class="form-check-label" for="attAVQ11Disagree">Disagree</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="attAVQuestion11" id="attAVQ11Neutral" value="3">
                                <label class="form-check-label" for="attAVQ11Neutral">Neutral</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="attAVQuestion11" id="attAVQ11Agree" value="4">
                                <label class="form-check-label" for="attAVQ11Agree">Agree</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="attAVQuestion11" id="attAVQ11StronglyAgree" value="5">
                                <label class="form-check-label" for="attAVQ11StronglyAgree">Strongly Agree</label>
                            </div>
                        </div>
                    </div>

                    <!-- Question 12 -->
                    <div class="mb-3">
                        <label class="form-label">12. I would be concerned with public transportation such as busses that are completely self-driving:</label>
                        <div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="attAVQuestion12" id="attAVQ12StronglyDisagree" value="1">
                                <label class="form-check-label" for="attAVQ12StronglyDisagree">Strongly Disagree</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="attAVQuestion12" id="attAVQ12Disagree" value="2">
                                <label class="form-check-label" for="attAVQ12Disagree">Disagree</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="attAVQuestion12" id="attAVQ12Neutral" value="3">
                                <label class="form-check-label" for="attAVQ12Neutral">Neutral</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="attAVQuestion12" id="attAVQ12Agree" value="4">
                                <label class="form-check-label" for="attAVQ12Agree">Agree</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="attAVQuestion12" id="attAVQ12StronglyAgree" value="5">
                                <label class="form-check-label" for="attAVQ12StronglyAgree">Strongly Agree</label>
                            </div>
                        </div>
                    </div>

                    <!-- Question 13 -->
                    <div class="mb-3">
                        <label class="form-label">13. I would be concerned with taxis that are completely self-driving:</label>
                        <div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="attAVQuestion13" id="attAVQ13StronglyDisagree" value="1">
                                <label class="form-check-label" for="attAVQ13StronglyDisagree">Strongly Disagree</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="attAVQuestion13" id="attAVQ13Disagree" value="2">
                                <label class="form-check-label" for="attAVQ13Disagree">Disagree</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="attAVQuestion13" id="attAVQ13Neutral" value="3">
                                <label class="form-check-label" for="attAVQ13Neutral">Neutral</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="attAVQuestion13" id="attAVQ13Agree" value="4">
                                <label class="form-check-label" for="attAVQ13Agree">Agree</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="attAVQuestion13" id="attAVQ13StronglyAgree" value="5">
                                <label class="form-check-label" for="attAVQ13StronglyAgree">Strongly Agree</label>
                            </div>
                        </div>
                    </div>
                </div>                                                 
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" id="attAVBtn"
                        onclick="TestQuestionFunctionality()">Next</button>
                </div>
            </div>
        </div>
    </div>    
 
    <!-- Video Completion Modal -->
    <div class="modal fade" id="notifMsg" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-sm modal-dialog-centered" id="notifMsgDialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="notifMsgTitle">Message</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" id="notifMsgBody">
                    <h6>The task is complete! You can submit it now.</h6>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-success" data-bs-dismiss="modal">Okay, Got it!</button>
                </div>
            </div>
        </div>
    </div>
<!-- Modal -->
    <div class="modal fade" tabindex="-1" role="dialog" id="imageModal">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Explanation behind driving decision</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
                        style="display:block;">
                    </button>
                </div>
                <div class="modal-body">
                    <img src="" id="modalImage" class="img-fluid" alt="Modal Image">
                </div>
            </div>
        </div>
    </div>
  
    <!-- END Modals -->


</body>

<script>
    // HELPER FUNCTIONS
    function shuffle(array) {
        //https://stackoverflow.com/a/2450976
        let currentIndex = array.length, randomIndex;

        // While there remain elements to shuffle.
        while (currentIndex != 0) {

            // Pick a remaining element.
            randomIndex = Math.floor(Math.random() * currentIndex);
            currentIndex--;

            // And swap it with the current element.
            [array[currentIndex], array[randomIndex]] = [
                array[randomIndex], array[currentIndex]];
        }

        return array;
    }
    function JsDeepCopy(obj) {
        // loses complext data type like date but we can parse from string in backend, and don't care
        let x = JSON.stringify(obj);
        var klone = JSON.parse(x);
        return klone;
    }
    function XfrHtml2Js(vars) {
        //makes a pipe between "html imported variable" and js to xfr html variable (flask variables hitdata) to js for saving
        return vars;
    }
    function RadioGroupResponse(radioGrpName) {
        var selector = document.querySelector('input[name=' + radioGrpName + ']:checked');
        let retValue = 'not_selected'; //undefined but not C
        if (selector) {
            retValue = selector.value;
        }
        // console.log('radio response is ', retValue);
        return retValue;
    }
    function ResetRadios(radioGroupName) {
        let radioBtns = document.getElementsByName(radioGroupName);
        radioBtns.forEach((x, i) => { x.checked = false; });
    }
    // Function to add the card div
    function addCardDiv(parentDivId,url,snapCount,snapTime) {
        parentDiv=document.querySelector('#'+parentDivId);
        // Create the card div element
        const cardDiv = document.createElement('div');
        cardDiv.classList.add('card', 'mb-1');
        cardDiv.id="snap_"+snapCount;

        // Create the image element
        const img = document.createElement('img');
        img.classList.add('card-img-top');
        img.src = url;
        
        // Create the card body element
        const cardBody = document.createElement('div');
        cardBody.classList.add('card-body', 'p-0');

        // Create the card text element
        const cardText = document.createElement('p');
        cardText.classList.add('card-text', 'text-center', 'p-0');
        cardText.textContent = 'Snapshot at: '+snapTime+'s, Click the thumbnail to zoom-in';

        // Append the elements to the card div
        cardBody.appendChild(cardText);
        cardDiv.appendChild(img);
        cardDiv.appendChild(cardBody);

        // Append the card div to the parent div
        parentDiv.appendChild(cardDiv);

       
        // Add click event listener to open the modal with the image
        cardDiv.addEventListener('click', function() {
                document.getElementById('modalImage').src = url; // Set the source of the modal image to the card imag e 
                  $('#imageModal').modal('show'); // Use Bootstrap's modal method to show the modal
            });        
    }

    //clear the children of a div
    function clearChildren(parentDivId) {
        parentDiv = document.querySelector('#' + parentDivId);
        // handle case where parentDiv is null
        if (parentDiv) {
            // remove all children
        while (parentDiv.firstChild) {
            parentDiv.removeChild(parentDiv.firstChild);
        }
        }
        return;
    }
    // END HELPER FUNCTIONS
    
    // Global Variables
    var g = {
        caseSeq: [], // array of case sequence, basically pointer to sources
        attnIndices: [6, 13],
        currentVideoNumber: 1, // current video number
        vid: document.getElementById('video'), // video element
        dataPoints: {}, // data points
        // bqIds: ['ageInput', 'genderInput', 'stateInput', 'driveRadioInput', 'lastDriveInput', 'transportationRadioInput', 'driveDaysInput'],
        bqIds: ['ageInput', 'genderInput','chkQ1RadioInput', 'hispanic_latino_reponse_Radio_input', "raceQuestions[]"],
        bq2Ids:["likeAiRadioInput", "questionsADS[]",'chkQ2RadioInput',"dislikeAiRadioInput"],
        bqRadioInputIds: ['driveRadioInput',],
        quizIds:["qEgoDirection","qEgoSpeed","qPedesIntent","qPedesDirection","qCarDirection"],
        backgroundQAnswers: {},
        quizGroundTruth: ['turning_right','slowing_down','cross','right','forward'], //change dirty implementation
        quizAnswers: [], //change dirty implementation
        questionStart: "Question: In the recorded scene, the pedestrian is currently ",
        questionAsk: ", do you think the pedestrian will ",
        baseSourceUrl: "https://escooter-phase4.s3.amazonaws.com/action_prediction/videos/",
        attnCheckQs: ["Is the scene recorded during the night?", "Is the color of the car in front is yellow?"],
        sources: [],
        attnCheckSources: ["195_attnChk_cut_at_5s.mp4", "43_attnChk_cut_at_5s.mp4"],
        reframeQuestions: { "walking": " stop walking", "standing": " start walking" },
        stsADAnswers: {},
        ueqsAnswers: {},
        ueqsRadioInputIds: ['obstructiveSupportive', 'complicatedEasy', 'inefficientEfficient', 'confusingClear', 'boringExciting', 'notInterestingInteresting', 'conventionalInventive', 'usualLeadingEdge'],
        piitAnswers: {},
        attAVAnswers: {},
        parentVidObjs:[
            {
                url: "./assets/videos//0104_intent_traj_box.mp4",
                snapshots: [
                    {
                        frameNumber: 40,
                        snapUrl: "./assets/videos//0104_level4_snap_0040.jpg"
                    },
                    {
                        frameNumber: 180,
                        snapUrl: "./assets/videos//0104_level4_snap_0180.jpg"
                    },
                    {
                        frameNumber: 304,
                        snapUrl: "./assets/videos//0104_level4_snap_0304.jpg"
                    }
                ]
            },
            {
                url: "./assets/videos//0080_intent_traj_box.mp4",
                snapshots: [
                    {
                        frameNumber: 36, // 1.2 * 30
                        snapUrl: "./assets/videos//0080_level4_snap_0036.jpg"
                    },
                    {
                        frameNumber: 243, // 8.1 * 30
                        snapUrl: "./assets/videos//0080_level4_snap_0243.jpg"
                    },
                    {
                        frameNumber: 271, // 9.03 * 30
                        snapUrl: "./assets/videos//0080_level4_snap_0271.jpg"
                    }
                ]
            },
            {
                url: "./assets/videos//0141_intent_traj_box.mp4",
                snapshots: [
                    {
                        frameNumber: 66, // 2.2 * 30
                        snapUrl: "./assets/videos//0141_level4_snap_0066.jpg"
                    },
                    {
                        frameNumber: 158, // 5.27 * 30
                        snapUrl: "./assets/videos//0141_level4_snap_0158.jpg"
                    }
                ]
            },
            {
                url: "./assets/videos//0151_intent_traj_box.mp4",
                snapshots: [
                    {
                        frameNumber: 42, // 1.4 * 30
                        snapUrl: "./assets/videos//0151_level4_snap_0042.jpg"
                    },
                    {
                        frameNumber: 152, // 5.07 * 30
                        snapUrl: "./assets/videos//0151_level4_snap_0152.jpg"
                    }
                ]
            },            
        ],
        
        vidObjs: [],
        pauseTimes: [],
        pauseCount:0,
        validationStepsCount:0,
    }
    // END Global Variables

    

    // use url from g.vidObjs to get variable videoSources
    var videoSources = g.vidObjs.map(x => x.url);


    // var videoSources = [
    // "./assets/videos//0104_intent_traj_box.mp4",
    // // "./assets/videos//0080_intent_traj_box.mp4",
    // // "./assets/videos//0104_intent_traj_box.mp4",
    // // "./assets/videos//0080_intent_traj_box.mp4",
    // ];

    

    // FUNCTIONS FOR EVENT LISTENERS
    function updateProgressBar() {
        var video = document.getElementById('video');
        var progress = document.getElementById('progressBarA');
        var value = (100 / video.duration) * video.currentTime;
        progress.style.width = value + '%';
    }  
    // add function to the timeupdate event, when time exceeds the pause time, pause the video
    function pauseAtTime() {
        // get the current time of the video
        let currentTime = g.vid.currentTime;
        //get the snap object
        g.snapshots = g.vidObjs[g.currentVideoNumber - 1].snapshots;
        // get the pause times for the current video
        g.pauseTimes = g.vidObjs[g.currentVideoNumber - 1].pauseTimes;

        if (g.pauseCount < g.snapshots.length) {
            let snapTime=g.snapshots[g.pauseCount].frameNumber/30;
            // round snapTime to 2 decimal places
            snapTime = Math.round(snapTime * 100) / 100;        
            if (currentTime >= snapTime) {
            g.vid.pause();
            console.log("pausetimes now:", snapTime);
            // clear the children of the snapDiv
            clearChildren('snapDiv');
            // do these things
            addCardDiv("snapDiv",g.vidObjs[g.currentVideoNumber - 1].snapshots[g.pauseCount].snapUrl,g.pauseCount,snapTime);
            // alert('video paused');
            document.getElementById('playBtn').innerHTML = "Play";
            g.pauseCount++;

            }
        }
    }
    
    function playPause() {
        if (g.vid.paused) {
                    g.vid.play();
                    document.getElementById('playBtn').innerHTML = "Pause";
                } else {
                    g.vid.pause();
                    document.getElementById('playBtn').innerHTML = "Play";
                }
    }
    function VideoOnFinishedPlaying(){
        // enable the next button
        document.getElementById('nextBtn').disabled = false;
        g.vid.pause();
        document.getElementById('playBtn').innerHTML = "Play";
        if (g.currentVideoNumber==(g.vidObjs.length)){
            document.getElementById('nextBtn').innerHTML = "Next";
        } 
    }

    function videoOnLoadedHandler() {
        //get window height
        var vh = Math.max(document.documentElement.clientHeight || 0, window.innerHeight || 0);
        document.getElementById('snapDiv').style.maxHeight = 0.8 * vh+"px";
        // console.log('video height:', g.vid.videoHeight);
    }
    function instructionsBtnHandler() {
        // show the instructions modal
        $('#instructionsModal').modal('show');
    }

    function prevBtnHandler() {
                // go to previous video
                if (g.currentVideoNumber > 1) {
                    g.currentVideoNumber--;                    
                    
                }
                if (g.currentVideoNumber == 1) {
                    document.getElementById('prevBtn').disabled = true;
                }
                LoadVideoObj();
                document.getElementById('nextBtn').innerHTML = "Next";
                UpdateVideoCounterDisplay();    
                        //clear the children of the snapDiv
                clearChildren('snapDiv');    
    }
    
    function ShowQuiz(){
        // show the quiz modal
        $('#quizModal').modal('show');
    }

    function submitQuiz(){
        // validate the quiz answers
        if (ValidateQuizAnswers()){
            // hide the quiz modal
            $('#quizModal').modal('hide');
            // show experiment ui
        }
    }

    function ValidateQuizAnswers(){
        // todo: validate the answers from quiz
        for (var i = 0; i < g.quizIds.length; i++) {
            var id = g.quizIds[i];
            console.log("checking id answer" ,id);
            // check if id has Radio substring
            
            var value = $('input[name="' + id + '"]:checked').val();
                g.quizAnswers[id] = value;
                if (value == undefined) {
                    alert("Please answer all the questions.");
                    // break;
                    return false;
                }
            // check if the answer is correct
            if (value != g.quizGroundTruth[i]) {
                alert("Your answers to one or more questions are incorrect. Please review the instructions.");
                // $('#quizModal').modal('hide');
                // $('#instructionsModal').modal('show');
                return false;
            }
        }
        console.log("quiz answers", g.quizAnswers);
        return true;
        g.validationStepsCount++;

    }
    // END-- FUNCTIONS FOR EVENT LISTENERS

    function MakeVideoStatusListButton(divId, idx) {
        var b = document.createElement('button');
        b.className = "btn btn-outline-secondary btn-sm me-1 mb-1";
        // b.style.flex="0!important";
        b.type = "button";
        // b.dataset.bsToggle="button";
        var inValue = (idx + 1);
        b.id = "vsrc_" + (inValue);
        b.innerHTML = inValue.toString();
        return b;
    }
    function populateFromCsv_old() {
        // populate videoSources from csv file
        let htmlVideoSources = document.getElementById("sourceList").innerHTML;
        videoSources = htmlVideoSources.split(',');
        g.vidObjs = shuffle(videoSources);
        g.attnIndices.forEach((idx, i) => {
            g.vidObjs.splice(idx, 0, g.attnCheckSources[i]);
        });
    }
    function populateFromCsv() {
        // does not use csv file anymore
        // g.vidObjs = shuffle(videoSources);
        g.vidObjs=shuffle(JsDeepCopy(g.parentVidObjs));
        g.sources = g.vidObjs.map(x => x.url);
        // g.attnIndices.forEach((idx, i) => {
        //     g.vidObjs.splice(idx, 0, g.attnCheckSources[i]);
        // });
    }

    function init() {
        populateFromCsv();
        if(g.currentVideoNumber==1){
            // disable the previous button
            document.getElementById('prevBtn').disabled = true;
        }
        // EVENT LISTENERS
            g.vid.addEventListener('timeupdate', updateProgressBar, false);
            g.vid.addEventListener('timeupdate', pauseAtTime, false);
            // add event listener to the playBtn so it toggles play/pause
            document.getElementById('playBtn').addEventListener('click', playPause, false);
            // video onload change width of progressDiv
            g.vid.addEventListener('loadeddata', videoOnLoadedHandler, false);
            // when video ends, evt listener function
            g.vid.addEventListener('ended', VideoOnFinishedPlaying, false);

            // add function to instructionsBtn
            document.getElementById('instructionsBtn').addEventListener('click', instructionsBtnHandler, false);
            document.getElementById('nextBtn').addEventListener('click', nextBtnHandler, false);
            document.getElementById('prevBtn').addEventListener('click', prevBtnHandler, false);

            // match snapshot div height to video height
            
            $(window).resize(function() {
            // var viewportHeight = $(window).height();
            var viewportHeight = $(window).height();
            $('#snapDiv').css('max-height', 0.8 * viewportHeight);
            });

        // END EVENT LISTENERS
        document.getElementById('nextBtn').disabled = true;
        g.vid.src=g.vidObjs[g.currentVideoNumber - 1].url;
    }



    function nextBtnHandler() {
        // deactivate the next button
        document.getElementById('nextBtn').disabled = true;
        //clear the children of the snapDiv
        clearChildren('snapDiv');
        g.currentVideoNumber++;
        g.validationStepsCount++;
        UpdateVideoCounterDisplay();
        if (g.currentVideoNumber> 1) {
                document.getElementById('prevBtn').disabled = false;
            }             
        if (g.currentVideoNumber > g.vidObjs.length) {
            g.currentVideoNumber = g.vidObjs.length;
            UpdateVideoCounterDisplay();
            // hide the video counter
            document.getElementById('videoNumberBadge').style.display = 'none';
            // pop up first questionnaire            
            $('#backgroundQuestionModal').modal('show');
            // hide the nextBtn
            // document.getElementById('nextBtn').style.display = 'none';
            return;
        }
        LoadVideoObj();
        //show the toast
        $('#notifToast').toast('show');                    
    }

    function LoadVideoObj(){
        // load the video object
        g.vid.src=g.vidObjs[g.currentVideoNumber - 1].url;
        //reset the pause count
        g.pauseCount=0;
        // load pauseTimes
        g.pauseTimes = g.vidObjs[g.currentVideoNumber - 1].pauseTimes;
        //set time of video to 0
        g.vid.currentTime = 0;
        //set the progress bar to 0
        document.getElementById('progressBarA').style.width = "0%";
    }
    function UpdateVideoCounterDisplay() {
        let elem=document.getElementById('videoNumberBadge');
        elem.innerHTML = "Video: "+g.currentVideoNumber;
    }

    function ChangeVideoSource() {
        g.currentVideoNumber = parseInt(this.innerHTML);
        // process meta data for updating the questions
        var sstring = g.vidObjs[g.currentVideoNumber - 1].url;
        // g.vid.src = sstring; // dont allow changing video source only next button can change
        g.vid.pause();
        //      HANDLE LIST OF BUTTONS
        // make this active, others inactive
        let btns = $(this).parent().children();
        for (let j = 0; j < btns.length; j++) {
            let btn = btns[j];
            if (!($(btn).hasClass('btn-primary'))) {
                $(btn).attr("class", "btn btn-outline-secondary");
            }
        }
        // if selected button is not blue, make it highlighted
        if (!($(this).hasClass('btn-primary'))) { $(this).attr("class", "btn btn-secondary"); }
        // just highlight it for now
        // $(this).attr("class", "btn btn-secondary");
    }

    function RecordConsent() {
        //records the consent and hides the modal window
        $('#consentModal').modal('hide');
        //show commitment modal
        $('#commitmentModal').modal('show');
    }

    function CommitmentCheck() {
        // check if user is committed to the task
        // From commitment radio button, get the value commitAnswer
        var commitAnswer = $('input[name="commitAnswer"]:checked').val();

        // if value is ambiguous, show warning and do not proceed
        if (commitAnswer == "yes") {
            return true;
        }
        else {
            alert("You must commit to the task to proceed, otherwise you can return the task for someone else to complete.");
            return false;
        }
    }

    function ProceedToExperiment() {
        // do response check before proceeding
        if (!CommitmentCheck()) {
            return;
        }
        //hide commitment modal
        $('#commitmentModal').modal('hide');
        //show instructions modal
        $('#instructionsModal').modal('show');
        // $('#stsADModal').modal('show');
    }

    function collectMultipleChoices(form_id){
        const checkboxes = document.querySelectorAll('input[name="' + form_id + '"]:checked');
        const selectedValues = [];
        checkboxes.forEach((checkbox) => {
            selectedValues.push(checkbox.value);
        });
        console.log("Selected values:", selectedValues);
        return selectedValues;
    }

    function BackgroundQuestionValidation() {
        // checks if all background questions are answered from bqIds
        for (var i = 0; i < g.bqIds.length; i++) {
            var id = g.bqIds[i];
            console.log("checking id answer" ,id);
            // check if id has Radio substring
            if(id.includes('Radio')){
                var value = $('input[name="' + id + '"]:checked').val();
                    g.backgroundQAnswers[id] = value;
                    if (value == undefined) {
                        alert("Please answer all the questions.");
                        return false;
                    }
                    continue;                             
            } else if(id.includes('[]')){
                const selectedValues=collectMultipleChoices(id);
                g.backgroundQAnswers[id] = selectedValues;
                if (selectedValues.length == 0) {
                        alert("Please answer all the questions.");
                        return false;
                    }
                    continue;                             
            }
            // else get value using this way
            var value = document.getElementById(id).value;
            g.backgroundQAnswers[id] = value;
            if (value == "") {
                alert("Please answer all the questions.");
                return false;
            }
        }
        g.validationStepsCount++;
        return true;
    }

    function GetBackgroundData() {
        console.log('in background data, ', g.backgroundQAnswers);
    }
    function StsADQuestionsValidation() {
        // checks if all background questions are answered from bqIds
        for (var i = 0; i < 6; i++) {
            var id = 'stsADQuestion' + (i + 1);
            var value=$('input[name="' + id + '"]:checked').val();
            if (value == undefined) {
                    alert("Please answer all the questions before you proceed.");
                    return false;
                }
                continue;        
        }
        g.validationStepsCount++;
        return true;
    }    
    function GetStsADData() {
        g.stsADAnswers["stsADQuestion1"] = RadioGroupResponse('stsADQuestion1');
        g.stsADAnswers["stsADQuestion2"] = RadioGroupResponse('stsADQuestion2');
        g.stsADAnswers["stsADQuestion3"] = RadioGroupResponse('stsADQuestion3');
        g.stsADAnswers["stsADQuestion4"] = RadioGroupResponse('stsADQuestion4');
        g.stsADAnswers["stsADQuestion5"] = RadioGroupResponse('stsADQuestion5');
        g.stsADAnswers["stsADQuestion6"] = RadioGroupResponse('stsADQuestion6');        
        
        //test
        console.log('stsADAnswers: ', g.stsADAnswers);
    }
    function GoToUeqsQuestionnaire() {
        // do response check before proceeding
        if (!BackgroundQuestionValidation()) {
            return;
        }
        //get the data
        GetBackgroundData();
        $('#backgroundQuestionModal').modal('hide');
        $('#ueqsModal').modal('show');
    }
    function UeqsQuestionsValidation(){
        for(var i=0;i<g.ueqsRadioInputIds.length;i++){
            var id = g.ueqsRadioInputIds[i];
            var value=$('input[name="' + id + '"]:checked').val();
            if (value == undefined) {
                    alert("Please answer all the questions before you proceed.");
                    return false;
                }
                continue;        
        }
        g.validationStepsCount++;
        return true;    
    }
    function GetUeqsData() {
        for(var i=0;i<g.ueqsRadioInputIds.length;i++){
            var id = g.ueqsRadioInputIds[i];
            g.ueqsAnswers[id] = RadioGroupResponse(id);
        }
        
        //test
        console.log('ueqsAnswers in GetUeqsData ', g.ueqsAnswers);
    }
    function GoToStsAdQuestionnaire(){
        // do response check before proceeding
        if (!UeqsQuestionsValidation()) {
            return;
        }
        //get the data
        GetUeqsData();
        //hide  modal
        $('#ueqsModal').modal('hide');
        //show stsAD question modal
        $('#stsADModal').modal('show');
    }
    function GoToPiitQuestionnaire() {
        // do response check before proceeding
        if (!StsADQuestionsValidation()) {
            return;
        }
        //get the data
        GetStsADData();
        //hide stsAD modal
        $('#stsADModal').modal('hide');
        //show background question modal
        $('#piitModal').modal('show');

    }
    function PiitQuestionsValidation(){
        for(var i=0;i<4;i++){
            var id = 'piitQuestion'+(i+1);
            var value=$('input[name="' + id + '"]:checked').val();
            if (value == undefined) {
                    alert("Please answer all the questions before you proceed.");
                    return false;
                }
                continue;        
        }
        g.validationStepsCount++;
        return true;    
    }
    function GetPiitData() {
        for(var i=0;i<4;i++){
            var id = 'piitQuestion'+(i+1);
            g.piitAnswers[id] = RadioGroupResponse(id);
        }
        
        //test
        console.log('piitAnswers in GetPiitData ', g.piitAnswers);
    }
    function AttAVQuestionsValidation(){
        for(var i=0;i<13;i++){
            var id = 'attAVQuestion'+(i+1);
            var value=$('input[name="' + id + '"]:checked').val();
            if (value == undefined) {
                    alert("Please answer all the questions before you proceed.");
                    return false;
                }
                continue;        
        }
        return true;
    }

    function GetAttAVData() {
        for(var i=0;i<13;i++){
            var id = 'attAVQuestion'+(i+1);
            g.attAVAnswers[id] = RadioGroupResponse(id);
        }
        
        //test
        console.log('attAVAnswers in GetAttAVData ', g.attAVAnswers);
    }

    function BackgroundQuestionnaire2() {
        // do response check before proceeding
        if (!PiitQuestionsValidation()) {
            return;
        }
        //get the data
        GetPiitData();
        //hide stsAD modal
        $('#piitModal').modal('hide');
        //show attitude towards AV modal
        $('#backgroundQuestion2Modal').modal('show');
    }

    function BackgroundQuestion2Validation(){
    // checks if all background questions are answered from bqIds
    for (var i = 0; i < g.bq2Ids.length; i++) {
                var id = g.bq2Ids[i];
                console.log("checking id answer" ,id);
                // check if id has Radio substring
                if(id.includes('Radio')){
                    var value = $('input[name="' + id + '"]:checked').val();
                        g.backgroundQAnswers[id] = value;
                        if (value == undefined) {
                            alert("Please answer all the questions.");
                            return false;
                        }
                        continue;                             
                }else if(id.includes('[]')){
                const selectedValues=collectMultipleChoices(id);
                g.backgroundQAnswers[id] = selectedValues;
                if (selectedValues.length == 0) {
                            alert("Please answer all the questions.");
                            return false;
                        }
                        continue;                             
                }
                // else get value using this way
                var value = document.getElementById(id).value;
                g.backgroundQAnswers[id] = value;
                if (value == "") {
                    alert("Please answer all the questions.");
                    return false;
                }
            }
        g.validationStepsCount++;
            return true;
    }

    function GetBackgroundData2() {
        console.log('in background data, ', g.backgroundQAnswers);
    }

    function GoToAttAVQuestionnaire() {
        // do response check before proceeding
        if (!PiitQuestionsValidation()) {
            return;
        }
        //get the data
        GetPiitData();
        //hide stsAD modal
        $('#piitModal').modal('hide');
        //show attitude towards AV modal
        $('#attAVModal').modal('show');
    }

    function TestQuestionFunctionality(){
        // do response check before proceeding
        if (!AttAVQuestionsValidation()) {
            return;
        }
        //get the data
        GetAttAVData();
        //hide stsAD modal
        $('#attAVModal').modal('hide');
        $('#backgroundQuestionModal').modal('show');             
    }

    function FinishStudy(){
        if (!BackgroundQuestion2Validation()) {
            return;
        }
        //get the data
        GetBackgroundData2();
        //hide commitment modal
        $('#backgroundQuestion2Modal').modal('hide'); 
        $('#notifMsg').modal('show');               
    }
    function ProceedToWatchVideo() {
        // do response check before proceeding
        if (!BackgroundQuestionValidation()) {
            return;
        }
        //get the data
        GetBackgroundData();
        //hide commitment modal
        $('#backgroundQuestionModal').modal('hide');
    }
    function SkipBackgroundQuestions() {
        StsADQuestionsValidation();
        GetStsADData();
        //hide commitment modal
        $('#backgroundQuestionModal').modal('hide');
    }
    function CalculateProgress() {
        let pValue = Math.round(Object.keys(g.dataPoints).length / (g.vidObjs.length) * 100);
        return pValue;
    }
    function ValidateForm() {
        
        let status = false;

        if (g.validationStepsCount<10) {
            status = confirm('You might have missed some videos or questions, Are you sure you want to submit the task? Incomplete task may be rejected.');
        } else {
            status = true;
        }

        return status;
    }
    function reviseInstructions(){
        // $('#quizModal').modal('hide');
        $('#instructionsModal').modal('show');

    }
    init();
    $(document).ready(function () {
        // show modal
        // $('#consentModal').modal('show'); //irb
        $('#instructionsModal').modal('show');
        // $('#quizModal').modal('show');
        // $('#backgroundQuestionModal').modal('show');
        // $('#ueqsModal').modal('show');
        // $('#stsADModal').modal('show');
        // $('#piitModal').modal('show');
        // $('#backgroundQuestion2Modal').modal('show');

        // document.getElementById("crowd-form-content").style="";
        // $('#consentModal').modal('hide');
        // $('#consentModal').modal('show');

        // hide commitment modal
        $('#commitmentModal').modal('hide');
        //show attitude towards AV modal, retired
        // $('#attAVModal').modal('hide');
        

    });

    function submitTask(){
        if(!ValidateForm()){
            return;
        }
        else{
            let saveData = {
                submissionTimeStamp: Date.now(),
                demogQuestionData: g.backgroundQAnswers,
                stsADQuestionData: g.stsADAnswers,
                ueqsQuestionData: g.ueqsAnswers,
                piitQuestionData: g.piitAnswers,                
                // demogQuestionData: "age:" + g.backgroundQAnswers["age"] + "gender:" + g.backgroundQAnswers["gender"] + "state:" + g.backgroundQAnswers["state"] + "lastDriveMonthYear:" + g.backgroundQAnswers["lastDriveMonthYear"] + "driveDaysPerWeek:" + g.backgroundQAnswers["driveDaysPerWeek"] + "isDrivingNow:" + g.backgroundQAnswers["isDrivingNow"] + "transportation:" + g.backgroundQAnswers["transportation"] ,
                // demogQuestionData: "perceptionOfAi:" + document.getElementById(g.openQuestionsIds[0]).value + ";distinguishingReasons:" + document.getElementById(g.openQuestionsIds[1]).value + ';selfDrivingPerception: ' + $('input[name="drivingResponseRadio"]:checked').val(),
            }
            let answerString = JSON.stringify(saveData);
            // document.querySelector('#hiddenTaskAnswers').value = answerString; // very important line

            // console.log('answer string on submit is: ', answerString);

            // for sending to backend, unavailable in MTurk
            jsbody = {};
            jsbody['response'] = answerString;
            jsbody['hit_type'] = 'cognitive_state';

            // //-START-------------------------------
            // Fetch block, in MTurk remove it
            // var hostAddress = "";
            // // hostAddress="https://konfigurator.ml"; //uncomment this line when in production
            // // console.log('answer string on submit is: ', answerString);
            // fetch(hostAddress + "/recordResponses", {
            //     method: "POST",
            //     body: JSON.stringify(jsbody),
            //     headers: {
            //         "Content-type": "application/json; charset=UTF-8"
            //     }

            // }).then(response => response.json())
            //     .then(function (json) {
            //         console.log('data post: ', json);
            //     })
            // // //==END===============================                   
        }
    }    
</script>